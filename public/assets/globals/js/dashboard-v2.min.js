var d = new Date();
var year = d.getFullYear();



var getDate = function(e) {
    var t = new Date(e);
    var n = t.getDate();
    var r = t.getMonth() + 1;
    var i = t.getFullYear();
    if (n < 10) {
        n = "0" + n
    }
    if (r < 10) {
        r = "0" + r
    }
    t = i + "-" + r + "-" + n;
    return t
};
var handleVisitorsLineChart = function() {
    var e = "#0D888B";
    var t = "#00ACAC";
    var n = "#3273B1";
    var r = "#348FE2";
    var i = "rgba(0,0,0,0.6)";
    var s = "rgba(255,255,255,0.4)";
    
   // alert(month_users);
   //var response = new Array();
   var arra ;
   var month_users;
$.get( 
        'getMonthUsers',
         { sponsor: 'ghjgj' },
            function(response) {
                    if (response) {
                        month_users=response;
arra = month_users.split(",");
  Morris.Line({

        element: "visitors-line-chart",
        data: [{
            x: year+"-01-01",
            y: arra[0],
            z: arra[0]
        },{
            x: year+"-02-01",
            y: arra[1],
            z: arra[1]
        }, {
            x: year+"-03-01",
            y: arra[2],
            z: arra[2]
        }, {
            x: year+"-04-01",
            y: arra[3],
            z: arra[3]
        }, {
            x: year+"-05-01",
            y: arra[4],
            z: arra[4]
        }, {
            x: year+"-06-01",
            y: arra[5],
            z: arra[5]
        }, {
            x: year+"-07-01",
            y: arra[6],
            z: arra[6]
        }, {
            x: year+"-08-01",
            y: arra[7],
            z: arra[7]
        }, {
            x: year+"-09-01",
            y: arra[8],
            z: arra[8]
        }, {
            x: year+"-10-01",
            y: arra[9],
            z: arra[9]
        }, {
            x: year+"-11-01",
            y: arra[10],
            z: arra[10]
        }, {
            x: year+"-12-01",
            y: arra[11],
            z: arra[11]
        }],
        xkey: "x",
        ykeys: ["y", "z"],
        xLabelFormat: function(e) {
            e = getMonthName(e.getMonth());
            return e.toString()
        },
        labels: ["Users Joined", ""],
        lineColors: [e, n],
        pointFillColors: [t, r],
        lineWidth: "2px",
        pointStrokeColors: [i, i],
        resize: true,
        gridTextFamily: "Open Sans",
        gridTextColor: s,
        gridTextWeight: "normal",
        gridTextSize: "11px",
        gridLineColor: "rgba(0,0,0,0.5)",
        hideHover: "auto"
    })

                     }}
                );


  
};
var handleVisitorsDonutChart = function() {
    var e = "#00acac";
    var t = "#348fe2";
    $.get( 
        'getPayout',
         { sponsor: 'ghjgj' },
            function(response) {
        if (response) {
        payout_details = response;
        arra = payout_details.split(",");  
        Morris.Donut({
        element: "visitors-donut-chart",
        data: [{
            label: "Released",
            value: arra[0]
        }, {
            label: "Balance",
            value: arra[1]
        }],
        colors: [e, t],
        labelFamily: "Open Sans",
        labelColor: "rgba(255,255,255,0.4)",
        labelTextSize: "12px",
        backgroundColor: "#242a30"
    })
    }
                });
};
var handleVisitorsVectorMap = function() {
    if ($("#visitors-map").length !== 0) {
        map = new jvm.WorldMap({
            map: "world_merc_en",
            scaleColors: ["#e74c3c", "#0071a4"],
            container: $("#visitors-map"),
            normalizeFunction: "linear",
            hoverOpacity: .5,
            hoverColor: false,
            markerStyle: {
                initial: {
                    fill: "#4cabc7",
                    stroke: "transparent",
                    r: 3
                }
            },
            regions: [{
                attribute: "fill"
            }],
            regionStyle: {
                initial: {
                    fill: "rgb(97,109,125)",
                    "fill-opacity": 1,
                    stroke: "none",
                    "stroke-width": .4,
                    "stroke-opacity": 1
                },
                hover: {
                    "fill-opacity": .8
                },
                selected: {
                    fill: "yellow"
                },
                selectedHover: {}
            },
            series: {
                regions: [{
                    values: {
                        IN: "#00acac",
                        US: "#00acac",
                        KR: "#00acac"
                    }
                }]
            },
            focusOn: {
                x: .5,
                y: .5,
                scale: 2
            },
            backgroundColor: "#2d353c"
        })
    }
};
var handleScheduleCalendar = function() {
    var e = ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"];
    var t = ["S", "M", "T", "W", "T", "F", "S"];
    var n = new Date,
        r = n.getMonth() + 1,
        i = n.getFullYear();
    var s = [
        ["2/" + r + "/" + i, "Popover Title", "#", "#00acac", "Some contents here"],
        ["5/" + r + "/" + i, "Tooltip with link", "http://www.seantheme.com/color-admin-v1.3", "#2d353c"],
        ["18/" + r + "/" + i, "Popover with HTML Content", "#", "#2d353c", 'Some contents here <div class="text-right"><a href="http://www.google.com">view more >>></a></div>'],
        ["28/" + r + "/" + i, "Color Admin V1.3 Launched", "http://www.seantheme.com/color-admin-v1.3", "#2d353c"]
    ];
    var o = $("#schedule-calendar");
    $(o).calendar({
        months: e,
        days: t,
        events: s,
        popover_options: {
            placement: "top",
            html: true
        }
    });
    $(o).find("td.event").each(function() {
        var e = $(this).css("background-color");
        $(this).removeAttr("style");
        $(this).find("a").css("background-color", e)
    });
    $(o).find(".icon-arrow-left, .icon-arrow-right").parent().on("click", function() {
        $(o).find("td.event").each(function() {
            var e = $(this).css("background-color");
            $(this).removeAttr("style");
            $(this).find("a").css("background-color", e)
        })
    })
};
var handleDashboardGritterNotification = function() {
    $(window).load(function() {
        setTimeout(function() {
            $.gritter.add({
                title: "Welcome back, Admin!",
                text: "Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed tempus lacus ut lectus rutrum placerat.",
                image: "assets/img/user-14.jpg",
                sticky: true,
                time: "",
                class_name: "my-sticky-class"
            })
        }, 1e3)
    })
};

var DashboardV2 = function() {
    "use strict";
    return {
        init: function() {
            handleVisitorsLineChart();
            handleVisitorsDonutChart();
            handleVisitorsVectorMap();
            handleScheduleCalendar();
            handleDashboardGritterNotification()
        }
    }
}();


console.log("clear");
